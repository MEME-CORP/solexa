services:
  - type: web
    name: solexa-unified
    env: docker
    dockerfilePath: Dockerfile.unified
    plan: standard # Choose a plan with at least 1GB RAM
    numInstances: 1
    envVars:
      - key: HEADLESS_BROWSER
        value: "true"
      - key: DOCKER_ENV
        value: "true"
      - key: LOGLEVEL
        value: "INFO"
      - key: PYTHONPATH
        value: "/app"
      - key: TZ
        value: "UTC"
      - key: SKIP_CHMOD
        value: "true"
      - key: VERIFICATION_FILE_PATH
        value: "/app/static/verifications.json"
      - key: ADMIN_BASE_URL
        sync: false # This will be automatically set based on the service URL
      - key: PORT
        value: "5000"
      # Add your other environment variables here (API keys, etc.)
    disk:
      name: solexa-data
      mountPath: /app/static
      sizeGB: 1
    healthCheckPath: /health
    scaling:
      minInstances: 1
      maxInstances: 1 # Keep to 1 instance since we're running all bots in one container

  - type: worker
    name: solexa-twitter-bot
    env: docker
    dockerfilePath: Dockerfile.twitter
    plan: starter
    numInstances: 1
    envVars:
      - key: HEADLESS_BROWSER
        value: "true"
      - key: DOCKER_ENV
        value: "true"
      - key: DOCKER_DEBUG
        value: "true"
      - key: LOGLEVEL
        value: "INFO"
      - key: PYTHONPATH
        value: "/app"
      - key: TZ
        value: "UTC"
      - key: SKIP_CHMOD
        value: "true"
      - key: ADMIN_BASE_URL
        value: "https://solexa-web-interface.onrender.com"
      - key: VERIFICATION_FILE_PATH
        value: "/app/static/verifications.json"
    disk:
      name: solexa-shared-data
      mountPath: /app/static
      sizeGB: 1

  - type: worker
    name: solexa-telegram-bot
    env: docker
    dockerfilePath: Dockerfile.telegram
    plan: starter
    numInstances: 1
    envVars:
      - key: DOCKER_ENV
        value: "true"
      - key: LOGLEVEL
        value: "INFO"
      - key: PYTHONPATH
        value: "/app"
      - key: TZ
        value: "UTC"
      - key: ADMIN_BASE_URL
        value: "https://solexa-web-interface.onrender.com"
    disk:
      name: solexa-shared-data
      mountPath: /app/static
      sizeGB: 1
  
 